<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
</head>
<body>


<section class="content" th:fragment="Dashboard">
    <div class="container-fluid">

        <div class="panel panel-headline">
            <div class="panel-body" th:if="${currentUserGoal==null}">
                <h1>CEL: </h1>
                <!--IF USER DOESN'T HAVE GOAL SET-->
                <!--<div th:if="${currentUserGoal==null}">-->
                <h3>Nie ustawiłeś jeszcze żadnego celu, możesz zrobić to teraz</h3>
                <p>(Kliknij "Dodaj cel")</p>
                <a th:href="@{/addGoal}" class="btn btn-primary">
                    <i class="fa fa-plus"></i>
                    <span>Dodaj cel</span>
                </a>
            </div>
            <!--IF USER HAVE GOAL SET-->
            <div th:if="${currentUserGoal!=null}"
                 th:style="'background-image:url(' + @{'/assets/img/categories/'+${currentUserGoal.category.name}+'.jpg'} + ');background-size:cover; background-position:center; height:350px'">
                <div class="panel-body">
                    <div class="goal-body">
                        <h1>CEL: </h1>
                        <h1 th:text="${currentUserGoal.name}"></h1>
                        <p th:text="${currentUserGoal.category.name}"></p>
                        <a th:onclick="'javascript:moveTo(\'' + @{/editGoal?id=}+${currentUserGoal.id_goal} + '\')'"
                           class="btn btn-primary">
                            <i class="fa fa-edit"></i>
                            <span>Edytuj</span>
                        </a>
                        <a th:onclick="'javascript:moveTo(\'' + @{/deleteGoal?id=}+${currentUserGoal.id_goal} + '\')'"
                           class="btn btn-primary">
                            <i class="fa fa-trash"></i>
                            <span>Usuń</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid" th:if="${currentUserGoal!=null}">
        <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="70"
                 aria-valuemin="0" aria-valuemax="100" style="width:70%;" th:text="${currentUserGoal.value}">
            </div>
        </div>
    </div>
    <div class="container-fluid" th:if="${currentUserGoal!=null}">
        <div class="row">
            <div class="col-md-2">
                <div class="metric user-panel">
                    <span class="panel-icon"><i class="ion ion-arrow-graph-up-right"></i></span>
                    <p>
                        <span class="panel-title">POSTĘP</span>
                        <span class="panel-value"
                              th:text="${currentUserFinances.current_state_to_goal+' / '+ currentUserGoal.value}"></span>
                    </p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="metric user-panel">
                    <span class="panel-icon"><i class="ion ion-cash"></i></span>
                    <p>
                        <span class="panel-title">STAN KONTA</span>
                        <span class="panel-value" th:text="${currentUserFinances.account_balance}"></span>
                    </p>
                </div>
            </div>
            <div class="col-md-2 ">
                <div class="metric user-panel">
                    <span class="panel-icon"><i class="ion ion-android-time"></i></span>
                    <p>
                        <span class="panel-title">SZACOWANY CZAS</span>
                        <span class="panel-value">37 DNI</span>
                    </p>
                </div>
            </div>
            <div class="col-md-2">
                <div class="metric user-panel">
                    <span class="panel-icon"><i class="ion ion-folder"></i></span>

                    <p>
                        <span class="panel-title">LOREM IPSUM</span>
                        <span class="panel-value">XXXS</span>
                    </p>

                </div>
            </div>
            <div class="col-md-2" th:onclick="'javascript:moveTo(\'' + @{/addIncome} + '\')'">
                <div class="metric income-panel">
                    <p class="panel-button">
                        <span class="panel-icon"><i class="ion ion-plus"></i></span>

                        <span class="panel-title-button">DODAJ</span>
                        <span class="panel-value-button">PRZYCHÓD</span>
                    </p>
                </div>
            </div>

            <div class="col-md-2" th:onclick="'javascript:moveTo(\'' + @{/addExpenses} + '\')'">
                <div class="metric extense-panel">
                    <p class="panel-button">
                        <span class="panel-icon"><i class="ion ion-minus"></i></span>

                        <span class="panel-title-button">ODEJMIJ</span>
                        <span class="panel-value-button">WYDATEK</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid" th:if="${currentUserGoal!=null}">
        <div class="row">

            <div class="col-md-6">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h4>Stały dochód:</h4>
                    </div>
                    <div class="stable-income">
                        <div class="panel-body">
                            <div class="col-md-12">
                            </div>
                            <div class="col-md-6">

                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="panel" style="background: #2B333E">
                    <div class="panel-heading">
                        <ul class="nav nav-item">
                            <li class="active"><a class="greenInc"data-toggle="tab" href="#income">Przychody</a></li>
                            <li><a class="redExp" data-toggle="tab" href="#expenses">Wydatki</a></li>
                            <li><a class="yellowAll" data-toggle="tab" href="#expensesAndIncomes">Wszystkie</a></li>
                        </ul>
                    </div>
                    <div class="tab-content">
                        <div class="all-income tab-pane fade in active" id="income">
                            <div class="panel-body">
                                <table class="table table-borderless table-spacing" width="100%">
                                    <tr class="incomesTable" th:each="income : ${lastIncomeList} ">
                                        <td class="chevron-cell"><i class="fa fa-chevron-up"></i></td>
                                        <td class="id-cell" th:text="'#'+${income.id_income}"></td>
                                        <td class="name-type-cell" th:text="${income.name}+ ' ' +${income.type}"></td>
                                        <td class="value-cell" th:text="'+'+${income.value}+'zł'"></td>
                                        <td class="date-cell" th:text="${#dates.format(income.date, 'dd-MM-yyyy HH:mm')}"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="all-income tab-pane fade" id="expenses">
                            <div class="panel-body">
                                <table class="table table-borderless table-spacing" width="100%">
                                    <tr class="expensesTable" th:each="expense : ${lastExpensesList}">
                                        <td class="chevron-cell-expense"><i class="fa fa-chevron-down"></i></td>
                                        <td class="id-cell-expense" th:text="'#'+${expense.idExpenses}"></td>
                                        <td class="name-type-cell-expense" th:text="${expense.name}+ ' ' +${expense.type}"></td>
                                        <td class="value-cell-expense" th:text="'-'+${expense.value}+'zł'"></td>
                                        <td class="date-cell-expense" th:text="${#dates.format(expense.date, 'dd-MM-yyyy HH:mm')}"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="all-income tab-pane fade" id="expensesAndIncomes">
                            <div class="panel-body">
                                <table class="table table-borderless table-spacing" width="100%">
                                    <tr class="incomeAndExpenseTable" th:each="incomeAndExpense : ${incomesAndExpensesTogether}">
                                        <td class="" th:classappend="${incomeAndExpense.isIncome()} ? chevron-cell : chevron-cell-expense"><i class="fa " th:classappend="${incomeAndExpense.isIncome()} ? fa-chevron-up : fa-chevron-down"></i></td>
                                        <!--<td><div><span th:if="${incomeAndExpense.isIncome()}">PRZYCHÓD</span><span th:if="${!incomeAndExpense.isIncome()}">WYDATEK</span></div></td>-->
                                        <td class="" th:classappend="${incomeAndExpense.isIncome()} ? id-cell : id-cell-expense" th:text="'#'+${incomeAndExpense.id}"></td>
                                        <td class="" th:classappend="${incomeAndExpense.isIncome()} ? name-type-cell : name-type-cell-expense" th:text="${incomeAndExpense.name}+ ' ' +${incomeAndExpense.type}"></td>
                                        <td class="" th:classappend="${incomeAndExpense.isIncome()} ? value-cell : value-cell-expense" th:text="${incomeAndExpense.value}+'zł'"></td>
                                        <td class="" th:classappend="${incomeAndExpense.isIncome()} ? date-cell : date-cell-expense" th:text="${#dates.format(incomeAndExpense.date, 'dd-MM-yyyy HH:mm')}"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</body>
<script>
</script>
</html>